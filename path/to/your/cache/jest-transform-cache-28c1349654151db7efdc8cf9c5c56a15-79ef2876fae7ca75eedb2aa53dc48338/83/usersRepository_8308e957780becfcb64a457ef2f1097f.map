{"version":3,"names":["cov_268zub4kp4","actualCoverage","User","bcrypt","gravatar","s","createUser","email","password","f","hashedPassword","hash","avatarURL","url","r","d","user","create","findUserByEmail","findOne","updateToken","userId","token","findByIdAndUpdate","unsetUserToken","new","updateUserAvatar"],"sources":["usersRepository.js"],"sourcesContent":["import User from \"#models/user.js\";\nimport bcrypt from \"bcrypt\";\nimport gravatar from \"gravatar\";\n\nexport const createUser = async ({ email, password }) => {\n  const hashedPassword = await bcrypt.hash(password, 12);\n  const avatarURL = gravatar.url(email, { s: \"250\", r: \"pg\", d: \"mm\" });\n  const user = await User.create({\n    email,\n    password: hashedPassword,\n    avatarURL,\n  });\n  return user;\n};\nexport const findUserByEmail = (email) => {\n  return User.findOne({ email });\n};\n\nexport const updateToken = (userId, token) => {\n  return User.findByIdAndUpdate(userId, { token });\n};\n\nexport const unsetUserToken = async (userId) => {\n  return User.findByIdAndUpdate(userId, { token: null }, { new: true });\n};\n\nexport const updateUserAvatar = (userId, avatarURL) => {\n  return User.findByIdAndUpdate(userId, { avatarURL }, { new: true });\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ,OAAOE,IAAI,MAAM,iBAAiB;AAClC,OAAOC,MAAM,MAAM,QAAQ;AAC3B,OAAOC,QAAQ,MAAM,UAAU;AAAC;AAAAJ,cAAA,GAAAK,CAAA;AAEhC,OAAO,MAAMC,UAAU,GAAG,MAAAA,CAAO;EAAEC,KAAK;EAAEC;AAAS,CAAC,KAAK;EAAA;EAAAR,cAAA,GAAAS,CAAA;EACvD,MAAMC,cAAc;EAAA;EAAA,CAAAV,cAAA,GAAAK,CAAA,OAAG,MAAMF,MAAM,CAACQ,IAAI,CAACH,QAAQ,EAAE,EAAE,CAAC;EACtD,MAAMI,SAAS;EAAA;EAAA,CAAAZ,cAAA,GAAAK,CAAA,OAAGD,QAAQ,CAACS,GAAG,CAACN,KAAK,EAAE;IAAEF,CAAC,EAAE,KAAK;IAAES,CAAC,EAAE,IAAI;IAAEC,CAAC,EAAE;EAAK,CAAC,CAAC;EACrE,MAAMC,IAAI;EAAA;EAAA,CAAAhB,cAAA,GAAAK,CAAA,OAAG,MAAMH,IAAI,CAACe,MAAM,CAAC;IAC7BV,KAAK;IACLC,QAAQ,EAAEE,cAAc;IACxBE;EACF,CAAC,CAAC;EAAC;EAAAZ,cAAA,GAAAK,CAAA;EACH,OAAOW,IAAI;AACb,CAAC;AAAC;AAAAhB,cAAA,GAAAK,CAAA;AACF,OAAO,MAAMa,eAAe,GAAIX,KAAK,IAAK;EAAA;EAAAP,cAAA,GAAAS,CAAA;EAAAT,cAAA,GAAAK,CAAA;EACxC,OAAOH,IAAI,CAACiB,OAAO,CAAC;IAAEZ;EAAM,CAAC,CAAC;AAChC,CAAC;AAAC;AAAAP,cAAA,GAAAK,CAAA;AAEF,OAAO,MAAMe,WAAW,GAAGA,CAACC,MAAM,EAAEC,KAAK,KAAK;EAAA;EAAAtB,cAAA,GAAAS,CAAA;EAAAT,cAAA,GAAAK,CAAA;EAC5C,OAAOH,IAAI,CAACqB,iBAAiB,CAACF,MAAM,EAAE;IAAEC;EAAM,CAAC,CAAC;AAClD,CAAC;AAAC;AAAAtB,cAAA,GAAAK,CAAA;AAEF,OAAO,MAAMmB,cAAc,GAAG,MAAOH,MAAM,IAAK;EAAA;EAAArB,cAAA,GAAAS,CAAA;EAAAT,cAAA,GAAAK,CAAA;EAC9C,OAAOH,IAAI,CAACqB,iBAAiB,CAACF,MAAM,EAAE;IAAEC,KAAK,EAAE;EAAK,CAAC,EAAE;IAAEG,GAAG,EAAE;EAAK,CAAC,CAAC;AACvE,CAAC;AAAC;AAAAzB,cAAA,GAAAK,CAAA;AAEF,OAAO,MAAMqB,gBAAgB,GAAGA,CAACL,MAAM,EAAET,SAAS,KAAK;EAAA;EAAAZ,cAAA,GAAAS,CAAA;EAAAT,cAAA,GAAAK,CAAA;EACrD,OAAOH,IAAI,CAACqB,iBAAiB,CAACF,MAAM,EAAE;IAAET;EAAU,CAAC,EAAE;IAAEa,GAAG,EAAE;EAAK,CAAC,CAAC;AACrE,CAAC"}